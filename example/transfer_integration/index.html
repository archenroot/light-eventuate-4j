<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Account Money Transfer - Light Eventuate 4J - An event sourcing and CQRS framework with Kafka</title>
    <meta name="generator" content="Hugo 0.20.6" />

    
    <meta name="description" content="Light Eventuate Docs">
    
    <link rel="canonical" href="https://networknt.github.io/light-eventuate-4j/example/transfer_integration/">
    
    <meta name="author" content="Steve Hu, Gavin Chen">
    

    <meta property="og:url" content="https://networknt.github.io/light-eventuate-4j/example/transfer_integration/">
    <meta property="og:title" content="Light Eventuate 4J - An event sourcing and CQRS framework with Kafka">
    <meta property="og:image" content="https://networknt.github.io/light-eventuate-4j/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="Light Eventuate 4J - An event sourcing and CQRS framework with Kafka">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://networknt.github.io/light-eventuate-4j/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://networknt.github.io/light-eventuate-4j/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://networknt.github.io/light-eventuate-4j/fonts/icon.eot');
        src: url('https://networknt.github.io/light-eventuate-4j/fonts/icon.eot')
               format('embedded-opentype'),
             url('https://networknt.github.io/light-eventuate-4j/fonts/icon.woff')
               format('woff'),
             url('https://networknt.github.io/light-eventuate-4j/fonts/icon.ttf')
               format('truetype'),
             url('https://networknt.github.io/light-eventuate-4j/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://networknt.github.io/light-eventuate-4j/stylesheets/application.css">
    <link rel="stylesheet" href="https://networknt.github.io/light-eventuate-4j/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://networknt.github.io/light-eventuate-4j/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://networknt.github.io/light-eventuate-4j/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="https://networknt.github.io/light-eventuate-4j/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-red palette-accent-teal">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Account Money Transfer
      </div>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/stevehu" title="@stevehu on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://github.com/networknt/light-eventuate-4j" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://networknt.github.io/light-eventuate-4jimages/logo.png">
        </div>
      
      <div class="name">
        <strong>Light Eventuate 4J - An event sourcing and CQRS framework with Kafka <span class="version">1.4.3</span></strong>
        
          <br>
          networknt/light-eventuate-4j
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            <a href="https://github.com/networknt/light-eventuate-4j/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/networknt/light-eventuate-4j/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="Getting started" href="https://networknt.github.io/light-eventuate-4j/getting-started/">
	
	Getting started
</a>



  
</li>



<li>
  
    



<a  title="Architecture" href="https://networknt.github.io/light-eventuate-4j/architecture/">
	
	Architecture
</a>



  
</li>



<li>
  
    



<a  title="Design" href="https://networknt.github.io/light-eventuate-4j/design/">
	
	Design
</a>



  
</li>



<li>
  
    



<a  title="Component" href="https://networknt.github.io/light-eventuate-4j/component/">
	
	Component
</a>



  
</li>



<li>
  
    



<a  title="Tutorial" href="https://networknt.github.io/light-eventuate-4j/tutorial/">
	
	Tutorial
</a>



  
</li>



<li>
  
    



<a  title="Example" href="https://networknt.github.io/light-eventuate-4j/example/">
	
	Example
</a>



  
</li>



<li>
  
    



<a  title="Issues &amp; Help" href="https://github.com/networknt/light-eventuate/issues">
	
	Issues &amp; Help
</a>



  
</li>



<li>
  
    



<a  title="Roadmap" href="https://networknt.github.io/light-eventuate-4j/roadmap/">
	
	Roadmap
</a>



  
</li>



<li>
  
    



<a  title="License" href="https://www.apache.org/licenses/LICENSE-2.0">
	
	License
</a>



  
</li>



<li>
  
    



<a  title="Introduction" href="https://networknt.github.io/light-eventuate-4j/index.html">
	
	Introduction
</a>



  
</li>


        </ul>
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          

          
          <li>
            <a href="https://github.com/stevehu" target="_blank" title="@stevehu on GitHub">
              @stevehu on GitHub
            </a>
          </li>
          

          
          <li>
            <a href="mailto:stevehu@gmail.com" title="Email of stevehu@gmail.com">
              Contact via email
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Account Money Transfer </h1>

			

<h1 id="prepare-environment">Prepare environment</h1>

<p>We are going to use docker-compose to start light-eventuate-4j, cdcserver
and account money transfer services.</p>

<p>The following assumes that we have a working directory under user directory
called networknt.</p>

<h2 id="start-light-eventuate-4j-and-cdcserver">Start light-eventuate-4j and cdcserver</h2>

<p>First let&rsquo;s clone the light-docker repository that contains docker-compose
to start light-eventuate-4j platform and cdcserver.</p>

<pre><code>cd ~/networknt
git clone git@github.com:networknt/light-docker.git
</code></pre>

<p>Now you can follow this <a href="https://networknt.github.io/light-eventuate-4j/tutorial/service-dev/">tutorial</a>
to start light-eventuate-4j and cdcserver.</p>

<h2 id="run-the-event-store-and-mocroservices">Run the Event store and Mocroservices:</h2>

<p>Before starting any service, we need to make sure that light-eventuate-4j is
up and running. Please follow this <a href="https://networknt.github.io/light-eventuate-4j/tutorial/service-dev/">tutorial</a>
to start it up.</p>

<h2 id="start-account-management-services">Start Account-Management services</h2>

<p>First we need to make sure Mysql, Zookeeper, Kafka and CDC server are up and
running by following the previous steps.</p>

<p>Then start services with docker compose file for account money transfer services</p>

<pre><code>cd ~/networknt/light-example-4j/eventuate/account-management
docker-compose down
docker-compose up
</code></pre>

<h1 id="test-and-verify-result">Test and verify result:</h1>

<h2 id="from-command-line">From command line:</h2>

<h2 id="create-new-customer-c1">Create new customer (C1):</h2>

<ul>
<li>On customer command side, system sent the CreateCustomerCommand and apply CustomerCreatedEvent event.</li>
<li>On customer view side, system subscribe the CustomerCreatedEvent by registered event handlers. In the example, system will process event and save customer to local database.</li>
</ul>

<pre><code>curl -X POST \
  http://localhost:8083/v1/createcustomer \
  -H 'cache-control: no-cache' \
  -H 'content-type: application/json' \
  -d '{&quot;name&quot;:{&quot;firstName&quot;:&quot;Google11&quot;,&quot;lastName&quot;:&quot;Com&quot;},&quot;email&quot;:&quot;aaa1.bbb1@google.com&quot;,&quot;password&quot;:&quot;password&quot;,&quot;ssn&quot;:&quot;9999999999&quot;,&quot;phoneNumber&quot;:&quot;4166666666&quot;,&quot;address&quot;:{&quot;street1&quot;:&quot;Yonge St&quot;,&quot;street2&quot;:&quot;2556 unit&quot;,&quot;city&quot;:&quot;toronto&quot;,&quot;state&quot;:&quot;ON&quot;,&quot;zipCode&quot;:&quot;Canada&quot;,&quot;country&quot;:&quot;L3R 5F5&quot;}}'
</code></pre>

<p>Sample Result:</p>

<pre><code>{&quot;id&quot;:&quot;0000015cf50351d8-0242ac1200060000&quot;,&quot;customerInfo&quot;:{&quot;name&quot;:{&quot;firstName&quot;:&quot;Google22&quot;,&quot;lastName&quot;:&quot;Com&quot;},&quot;email&quot;:&quot;aaa1.bbb@google.com&quot;,&quot;password&quot;:&quot;password&quot;,&quot;ssn&quot;:&quot;9999999999&quot;,&quot;phoneNumber&quot;:&quot;4166666666&quot;,&quot;address&quot;:{&quot;street1&quot;:&quot;Yonge St&quot;,&quot;street2&quot;:&quot;2556 unit&quot;,&quot;city&quot;:&quot;toronto&quot;,&quot;state&quot;:&quot;ON&quot;,&quot;zipCode&quot;:&quot;Canada&quot;,&quot;country&quot;:&quot;L3R 5F5&quot;}}}
</code></pre>

<p>The json format result include system generated customer id for new created customer: &ldquo;id&rdquo;:&ldquo;0000015cf50351d8-0242ac1200060000&rdquo;. Get the customer id (C1) from your real result and save it in a text file.  We could use the customer id in the open account restful API call to open account the customer.</p>

<h2 id="create-an-account-with-the-customer-replace-the-customer-id-with-real-customer-id">Create an account with the customer (replace the customer id with real customer id):</h2>

<ul>
<li>On account command side, system sent the OpenAccountCommand and apply AccountOpenedEvent event.</li>
<li>On account view side, system subscribe the  AccountOpenedEvent by registered event handlers. In the example, system will process event and save account and account/customer relationship to local database.</li>
<li>Open account for the customer created above, use the customer id above in the json data for HTTP POST: customerId&rdquo;:&ldquo;0000015cf50351d8-0242ac1200060000&rdquo;</li>
</ul>

<pre><code>curl -X POST \
  http://localhost:8081/v1/openaccount \
  -H 'cache-control: no-cache' \
  -H 'content-type: application/json' \
  -d '{&quot;customerId&quot;:&quot;0000015cf50351d8-0242ac1200060000&quot;,&quot;title&quot;:&quot;RRSP account&quot;,&quot;description&quot;:&quot;account for testing&quot;,&quot;initialBalance&quot;:12355}'
</code></pre>

<p>Result:</p>

<pre><code>{&quot;accountId&quot;:&quot;0000015cf505ed48-0242ac1200090001&quot;,&quot;balance&quot;:12355}
</code></pre>

<p>The json format result include system generated account id for new opened account: &ldquo;accountId&rdquo;:&ldquo;0000015cf505ed48-0242ac1200090001&rdquo;. Get the account id (A1) from your real result and save it in a text file. We could use the account Id for money transfer restful API.</p>

<h2 id="create-an-account-no-link-with-customer">Create an account (no link with customer)</h2>

<ul>
<li>On account command side, system sent the OpenAccountCommand and apply AccountOpenedEvent event.</li>
<li>On account view side, system subscribe the AccountOpenedEvent by registered event handlers. In the example, system will process event and save account to local database.</li>
</ul>

<pre><code>curl -X POST \
  http://localhost:8081/v1/openaccount \
  -H 'cache-control: no-cache' \
  -H 'content-type: application/json' \
  -d '{&quot;title&quot;:&quot;RRSP account&quot;,&quot;description&quot;:&quot;account for testing&quot;,&quot;initialBalance&quot;:12355}'
</code></pre>

<p>Result:</p>

<pre><code>{&quot;accountId&quot;:&quot;0000015cf5084627-0242ac1200090001&quot;,&quot;balance&quot;:12355}
</code></pre>

<p>The json format result include system generated account id for new opened account: &ldquo;accountId&rdquo;:&ldquo;0000015cf5084627-0242ac1200090001&rdquo;. Get the account id (A2) from your real result and save it in a text file. It will be used to link with customer (C2) in &ldquo;Link account to customer&rdquo; service call.</p>

<h2 id="create-new-customer-c2">Create new customer (C2):</h2>

<ul>
<li>On customer command side, system sent the CreateCustomerCommand and apply CustomerCreatedEvent event.</li>
<li>On customer view side, system subscribe the CustomerCreatedEvent by registered event handlers. In the example, system will process event and save customer to local database.</li>
</ul>

<pre><code>curl -X POST \
  http://localhost:8083/v1/createcustomer \
  -H 'cache-control: no-cache' \
  -H 'content-type: application/json' \
  -d '{&quot;name&quot;:{&quot;firstName&quot;:&quot;Google11&quot;,&quot;lastName&quot;:&quot;Com&quot;},&quot;email&quot;:&quot;aaa2.bbb@google.com&quot;,&quot;password&quot;:&quot;password&quot;,&quot;ssn&quot;:&quot;9999999999&quot;,&quot;phoneNumber&quot;:&quot;4166666666&quot;,&quot;address&quot;:{&quot;street1&quot;:&quot;Yonge St&quot;,&quot;street2&quot;:&quot;2556 unit&quot;,&quot;city&quot;:&quot;toronto&quot;,&quot;state&quot;:&quot;ON&quot;,&quot;zipCode&quot;:&quot;Canada&quot;,&quot;country&quot;:&quot;L3R 5F5&quot;}}'
</code></pre>

<p>Result:</p>

<pre><code>{&quot;id&quot;:&quot;0000015cf50bfe50-0242ac1200060001&quot;,&quot;customerInfo&quot;:{&quot;name&quot;:{&quot;firstName&quot;:&quot;Google11&quot;,&quot;lastName&quot;:&quot;Com&quot;},&quot;email&quot;:&quot;aaa2.bbb@google.com&quot;,&quot;password&quot;:&quot;password&quot;,&quot;ssn&quot;:&quot;9999999999&quot;,&quot;phoneNumber&quot;:&quot;4166666666&quot;,&quot;address&quot;:{&quot;street1&quot;:&quot;Yonge St&quot;,&quot;street2&quot;:&quot;2556 unit&quot;,&quot;city&quot;:&quot;toronto&quot;,&quot;state&quot;:&quot;ON&quot;,&quot;zipCode&quot;:&quot;Canada&quot;,&quot;country&quot;:&quot;L3R 5F5&quot;}}}
</code></pre>

<p>The json format result include system generated customer id for new created customer: &ldquo;id&rdquo;:&ldquo;0000015cf50bfe50-0242ac1200060001&rdquo;. Get the customer id (C2) from your real result and save it in a text file.  It will be used to link with account (opened on previous service call) in &ldquo;Link account to customer&rdquo; service call.</p>

<h2 id="link-account-to-customer-replace-the-customer-id-and-account-with-real-id">Link account to customer (replace the customer id and account with real Id):</h2>

<ul>
<li>On customer command side, system sent the AddToAccountCommand and apply CustomerAddedToAccount event.</li>
<li>On customer view side, system subscribe the CustomerAddedToAccount event by registered event handlers. In the example, system will process event and save customer/account relationship to local database.</li>
<li>Use the new created customer id (replace the {customerId}  with customer id (C2) in the url) and replace tge account id (A2) in POST json data which created on previous service call.</li>
</ul>

<pre><code>curl -X POST \
  http://localhost:8083/v1/customers/toaccounts/{customerId} \
  -H 'cache-control: no-cache' \
  -H 'content-type: application/json' \
  -d '{&quot;id&quot;:&quot;0000015cf5084627-0242ac1200090001&quot;,&quot;title&quot;:&quot;title&quot;,&quot;owner&quot;:&quot;google&quot;,&quot;description&quot;:&quot;test case&quot;}'
</code></pre>

<p>Result: 0000015cf50bfe50-0242ac1200060001</p>

<h2 id="transfer-money-from-account-replace-the-from-account-and-to-account-id-with-real-id">Transfer money from account (replace the from account and to account id with real id):</h2>

<ul>
<li>On transaction command side, system send MoneyTransferCommand and apply the MoneyTransferCreatedEvent event with certain amount</li>
<li>On account command side, system subscribes the MoneyTransferCreatedEvent event. System will verify the account balance based on the debit event.</li>
<li>If the balance is not enough, system publish AccountDebitFailedDueToInsufficientFundsEvent. Otherwise, system send AccountCreditedEvent/AccountDebitedEvent.</li>
<li>On transaction command side, if subscribed events are AccountCreditedEvent/AccountDebitedEvent, system will process event and publish CreditRecordedEvent/debitRecordedevent,
if subscribed event is AccountDebitFailedDueToInsufficientFundsEvent, system will publish FailedDebitRecordedEvent.</li>
<li>On account view side, if subscribed events are creditRecorded event and debitRecorded event, system will update local account balance and update the transaction status to COMPLETED.
if subscribed even FailedDebitRecordedEvent, system will update transaction status to FAILED_DUE_TO_INSUFFICIENT_FUNDS.</li>
<li>Use the two new opened account id (A1, A2) on previous services for the fromAccountId and toAccountId in the following service call.</li>
</ul>

<pre><code>curl -X POST \
  http://localhost:8085/v1/transfers \
  -H 'cache-control: no-cache' \
  -H 'content-type: application/json' \
  -d '{&quot;fromAccountId&quot;:&quot;0000015cf505ed48-0242ac1200090001&quot;,&quot;toAccountId&quot;:&quot;0000015cf5084627-0242ac1200090001&quot;,&quot;amount&quot;:5000,&quot;description&quot;:&quot;test&quot;}'
</code></pre>

<p>Result:</p>

<pre><code>{&quot;moneyTransferId&quot;:&quot;0000015cf5118e64-0242ac1200080000&quot;}
</code></pre>

<p>Return system generated money transfer transaction id</p>

<h2 id="delete-account">Delete account:</h2>

<ul>
<li>On account command side, system sent the DeleteAccountCommand  and apply AccountDeletedEvent event.</li>
<li>On account view side, system subscrible the  AccountDeletedEvent by registered event handles. On the example, system will process event and inactive account to local database.</li>
<li>On customer view side, system subscrible the  AccountDeletedEvent event by registered event handles. On the example, system will process event and delete customer/account relationship to local database.</li>
</ul>

<pre><code>curl -X DELETE \
  http://localhost:8081/v1/delete/0000015cf4bec29b-0242ac1200070001 \
  -H 'cache-control: no-cache' \
  -H 'content-type: application/json' \
</code></pre>

<h2 id="customer-and-account-view">Customer and Account view:</h2>

<p>&ndash;View the new customer by email (provide wildcard search):</p>

<pre><code>curl http://localhost:8084/v1/customers/aaa1.bbb1@google.com
</code></pre>

<p>Result:</p>

<pre><code>{&quot;customers&quot;:[{&quot;id&quot;:&quot;0000015cf50351d8-0242ac1200060000&quot;,&quot;name&quot;:{&quot;firstName&quot;:&quot;Google22&quot;,&quot;lastName&quot;:&quot;Com&quot;},&quot;email&quot;:&quot;aaa1.bbb@google.com&quot;,&quot;password&quot;:&quot;password&quot;,&quot;ssn&quot;:&quot;9999999999&quot;,&quot;phoneNumber&quot;:&quot;4166666666&quot;,&quot;address&quot;:{&quot;street1&quot;:&quot;Yonge St&quot;,&quot;street2&quot;:&quot;2556 unit&quot;,&quot;city&quot;:&quot;toronto&quot;,&quot;state&quot;:&quot;ON&quot;,&quot;zipCode&quot;:&quot;Canada&quot;,&quot;country&quot;:&quot;L3R 5F5&quot;},&quot;toAccounts&quot;:null}]}
</code></pre>

<p>&ndash;View the new customer by customer Id (replace the customer id with real customer id,. You can use copy from result of create customer)</p>

<pre><code>curl http://localhost:8084/v1/customer/{customerId}
</code></pre>

<p>Result:</p>

<pre><code>{&quot;id&quot;:&quot;0000015cf50351d8-0242ac1200060000&quot;,&quot;name&quot;:{&quot;firstName&quot;:&quot;Google22&quot;,&quot;lastName&quot;:&quot;Com&quot;},&quot;email&quot;:&quot;aaa1.bbb@google.com&quot;,&quot;password&quot;:&quot;password&quot;,&quot;ssn&quot;:&quot;9999999999&quot;,&quot;phoneNumber&quot;:&quot;4166666666&quot;,&quot;address&quot;:{&quot;street1&quot;:&quot;Yonge St&quot;,&quot;street2&quot;:&quot;2556 unit&quot;,&quot;city&quot;:&quot;toronto&quot;,&quot;state&quot;:&quot;ON&quot;,&quot;zipCode&quot;:&quot;Canada&quot;,&quot;country&quot;:&quot;L3R 5F5&quot;},&quot;toAccounts&quot;:null}
</code></pre>

<p>&ndash; view account by Id (replace the Id with real account Id)</p>

<pre><code>curl http://localhost:8082/v1/accounts/{accountId}
</code></pre>

<p>Result:</p>

<pre><code>{&quot;accountId&quot;:&quot;0000015cf505ed48-0242ac1200090001&quot;,&quot;balance&quot;:73550000,&quot;title&quot;:&quot;RRSP account&quot;,&quot;description&quot;:&quot;account for testing&quot;}
</code></pre>

<p>&ndash; View account transaction history:</p>

<pre><code>curl http://localhost:8082/v1/accounts/0000015cf910e31b-0242ac1200080000/history
</code></pre>

<p>Result:</p>

<pre><code>[{&quot;date&quot;:&quot;2017-06-30&quot;,&quot;entryType&quot;:null,&quot;transactionId&quot;:&quot;0000015cf914b22e-0242ac1200070001&quot;,&quot;fromAccountId&quot;:&quot;0000015cf910e31b-0242ac1200080000&quot;,&quot;toAccountId&quot;:&quot;0000015cf9115782-0242ac1200080001&quot;,&quot;amount&quot;:50000000,&quot;description&quot;:&quot;test&quot;,&quot;status&quot;:&quot;COMPLETED&quot;}]
</code></pre>

<h2 id="use-postman">Use Postman:</h2>

<h2 id="create-new-customer-c1-1">Create new customer (C1):</h2>

<p>POST URL: <a href="http://localhost:8083/v1/createcustomer">http://localhost:8083/v1/createcustomer</a></p>

<p>Header: Content-Type: application/json</p>

<p>Body:</p>

<pre><code>{&quot;name&quot;:{&quot;firstName&quot;:&quot;Google1222&quot;,&quot;lastName&quot;:&quot;Com1&quot;},&quot;email&quot;:&quot;aaa1.bbb1@google.com&quot;,&quot;password&quot;:&quot;password&quot;,&quot;ssn&quot;:&quot;9999999999&quot;,&quot;phoneNumber&quot;:&quot;4166666666&quot;,&quot;address&quot;:{&quot;street1&quot;:&quot;Yonge St&quot;,&quot;street2&quot;:&quot;2556 unit&quot;,&quot;city&quot;:&quot;toronto&quot;,&quot;state&quot;:&quot;ON&quot;,&quot;zipCode&quot;:&quot;Canada&quot;,&quot;country&quot;:&quot;L3R 5F5&quot;}}
</code></pre>

<h2 id="create-an-account-with-the-customer-replace-the-customer-id-with-real-customer-id-1">Create an account with the customer (replace the customer id with real customer id):</h2>

<p>POST URL: <a href="http://localhost:8081/v1/openaccount">http://localhost:8081/v1/openaccount</a></p>

<p>Header: Content-Type: application/json</p>

<p>Body: {&ldquo;customerId&rdquo;:&ldquo;0000015cf4be6114-0242ac1200060001&rdquo;,&ldquo;title&rdquo;:&ldquo;RRSP account&rdquo;,&ldquo;description&rdquo;:&ldquo;account for testing&rdquo;,&ldquo;initialBalance&rdquo;:12355}</p>

<h2 id="create-an-account-no-link-with-customer-1">Create an account (no link with customer)</h2>

<p>POST URL: <a href="http://localhost:8081/v1/openaccount">http://localhost:8081/v1/openaccount</a></p>

<p>Header: Content-Type: application/json</p>

<p>Body: {&ldquo;title&rdquo;:&ldquo;RRSP account&rdquo;,&ldquo;description&rdquo;:&ldquo;account for testing&rdquo;,&ldquo;initialBalance&rdquo;:12355}</p>

<h2 id="create-new-customer-c2-1">Create new customer (C2):</h2>

<p>POST URL: <a href="http://localhost:8083/v1/createcustomer">http://localhost:8083/v1/createcustomer</a></p>

<p>Header: Content-Type: application/json</p>

<p>Body:</p>

<pre><code>{&quot;name&quot;:{&quot;firstName&quot;:&quot;Google12&quot;,&quot;lastName&quot;:&quot;Com1&quot;},&quot;email&quot;:&quot;aaa2.bbb2@google.com&quot;,&quot;password&quot;:&quot;password&quot;,&quot;ssn&quot;:&quot;9999999999&quot;,&quot;phoneNumber&quot;:&quot;4166666666&quot;,&quot;address&quot;:{&quot;street1&quot;:&quot;Yonge St&quot;,&quot;street2&quot;:&quot;2556 unit&quot;,&quot;city&quot;:&quot;toronto&quot;,&quot;state&quot;:&quot;ON&quot;,&quot;zipCode&quot;:&quot;Canada&quot;,&quot;country&quot;:&quot;L3R 5F5&quot;}}
</code></pre>

<h2 id="link-account-to-customer-replace-the-customer-id-and-account-with-real-id-1">Link account to customer (replace the customer id and account with real Id):</h2>

<p>POST URL: <a href="http://localhost:8083/v1/customers/toaccounts/0000015cf4b840f3-0242ac1200070000">http://localhost:8083/v1/customers/toaccounts/0000015cf4b840f3-0242ac1200070000</a></p>

<p>Header: Content-Type: application/json</p>

<p>Body: {&ldquo;id&rdquo;:&ldquo;0000015cf4b080c7-0242ac1200070001&rdquo;,&ldquo;title&rdquo;:&ldquo;title&rdquo;,&ldquo;owner&rdquo;:&ldquo;google&rdquo;,&ldquo;description&rdquo;:&ldquo;test case&rdquo;}</p>

<h2 id="transfer-money-from-account-replace-the-from-account-and-to-account-id-with-real-id-1">Transfer money from account (replace the from account and to account id with real id):</h2>

<p>POST URL: <a href="http://localhost:8085/v1/transfers">http://localhost:8085/v1/transfers</a></p>

<p>Header: Content-Type: application/json</p>

<p>Body:{&ldquo;fromAccountId&rdquo;:&ldquo;2222-22222&rdquo;,&ldquo;toAccountId&rdquo;:&ldquo;2222-22223&rdquo;,&ldquo;amount&rdquo;:5000,&ldquo;description&rdquo;:&ldquo;test&rdquo;}</p>

<h2 id="delete-account-1">Delete account:</h2>

<p>DELETE URL: <a href="http://localhost:8081/v1/delete/0000015cf4bec29b-0242ac1200070001">http://localhost:8081/v1/delete/0000015cf4bec29b-0242ac1200070001</a></p>

<p>Header: Content-Type: application/json</p>

<h2 id="customer-and-account-view-use-any-browser">Customer and Account view (use any browser)</h2>

<p>&ndash;View the new customer by email (provide wildcard search):</p>

<p><a href="http://localhost:8084/v1/customers/aaa1.bbb1@google.com">http://localhost:8084/v1/customers/aaa1.bbb1@google.com</a></p>

<p>&ndash;View the new customer by customer Id (replace the customer id with real customer id,. You can use copy from result of create customer)</p>

<p><a href="http://localhost:8084/v1/customer/{customerId">http://localhost:8084/v1/customer/{customerId</a>}</p>

<p>&ndash; view account by Id (replace the Id with real account Id)</p>

<p><a href="http://localhost:8082/v1/accounts/{accountId">http://localhost:8082/v1/accounts/{accountId</a>}</p>

<p>&ndash; View account transaction history:</p>

<p><a href="http://localhost:8082/v1/accounts/0000015cf910e31b-0242ac1200080000/history">http://localhost:8082/v1/accounts/0000015cf910e31b-0242ac1200080000/history</a></p>

<h2 id="end">End</h2>


			<aside class="copyright" role="note">
				
				&copy; 2017 Released under the MIT license &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="https://networknt.github.io/light-eventuate-4j/" title="Introduction">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Introduction
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="https://networknt.github.io/light-eventuate-4j/example/transfer/" title="Account Money Transfer Example">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Account Money Transfer Example
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'https:\/\/networknt.github.io\/light-eventuate-4j';
      var repo_id  = 'networknt\/light-eventuate-4j';
    
    </script>

    <script src="https://networknt.github.io/light-eventuate-4j/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

