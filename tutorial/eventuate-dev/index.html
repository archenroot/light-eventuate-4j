<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Workspace setup for developing light-eventuate-4j component - Light Eventuate 4J - An event sourcing and CQRS framework with Kafka</title>
    <meta name="generator" content="Hugo 0.20.6" />

    
    <meta name="description" content="Light Eventuate Docs">
    
    <link rel="canonical" href="https://networknt.github.io/light-eventuate-4j/tutorial/eventuate-dev/">
    
    <meta name="author" content="Steve Hu, Gavin Chen">
    

    <meta property="og:url" content="https://networknt.github.io/light-eventuate-4j/tutorial/eventuate-dev/">
    <meta property="og:title" content="Light Eventuate 4J - An event sourcing and CQRS framework with Kafka">
    <meta property="og:image" content="https://networknt.github.io/light-eventuate-4j/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="Light Eventuate 4J - An event sourcing and CQRS framework with Kafka">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://networknt.github.io/light-eventuate-4j/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://networknt.github.io/light-eventuate-4j/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://networknt.github.io/light-eventuate-4j/fonts/icon.eot');
        src: url('https://networknt.github.io/light-eventuate-4j/fonts/icon.eot')
               format('embedded-opentype'),
             url('https://networknt.github.io/light-eventuate-4j/fonts/icon.woff')
               format('woff'),
             url('https://networknt.github.io/light-eventuate-4j/fonts/icon.ttf')
               format('truetype'),
             url('https://networknt.github.io/light-eventuate-4j/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://networknt.github.io/light-eventuate-4j/stylesheets/application.css">
    <link rel="stylesheet" href="https://networknt.github.io/light-eventuate-4j/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://networknt.github.io/light-eventuate-4j/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://networknt.github.io/light-eventuate-4j/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="https://networknt.github.io/light-eventuate-4j/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-red palette-accent-teal">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Workspace setup for developing light-eventuate-4j component
      </div>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/stevehu" title="@stevehu on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://github.com/networknt/light-eventuate-4j" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://networknt.github.io/light-eventuate-4jimages/logo.png">
        </div>
      
      <div class="name">
        <strong>Light Eventuate 4J - An event sourcing and CQRS framework with Kafka <span class="version">1.3.5</span></strong>
        
          <br>
          networknt/light-eventuate-4j
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            <a href="https://github.com/networknt/light-eventuate-4j/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/networknt/light-eventuate-4j/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="Getting started" href="https://networknt.github.io/light-eventuate-4j/getting-started/">
	
	Getting started
</a>



  
</li>



<li>
  
    



<a  title="Architecture" href="https://networknt.github.io/light-eventuate-4j/architecture/">
	
	Architecture
</a>



  
</li>



<li>
  
    



<a  title="Design" href="https://networknt.github.io/light-eventuate-4j/design/">
	
	Design
</a>



  
</li>



<li>
  
    



<a  title="Component" href="https://networknt.github.io/light-eventuate-4j/component/">
	
	Component
</a>



  
</li>



<li>
  
    



<a  title="Tutorial" href="https://networknt.github.io/light-eventuate-4j/tutorial/">
	
	Tutorial
</a>



  
</li>



<li>
  
    



<a  title="Example" href="https://networknt.github.io/light-eventuate-4j/example/">
	
	Example
</a>



  
</li>



<li>
  
    



<a  title="Issues &amp; Help" href="https://github.com/networknt/light-eventuate/issues">
	
	Issues &amp; Help
</a>



  
</li>



<li>
  
    



<a  title="Roadmap" href="https://networknt.github.io/light-eventuate-4j/roadmap/">
	
	Roadmap
</a>



  
</li>



<li>
  
    



<a  title="License" href="https://www.apache.org/licenses/LICENSE-2.0">
	
	License
</a>



  
</li>



<li>
  
    



<a  title="Introduction" href="https://networknt.github.io/light-eventuate-4j/index.html">
	
	Introduction
</a>



  
</li>


        </ul>
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          

          
          <li>
            <a href="https://github.com/stevehu" target="_blank" title="@stevehu on GitHub">
              @stevehu on GitHub
            </a>
          </li>
          

          
          <li>
            <a href="mailto:stevehu@gmail.com" title="Email of stevehu@gmail.com">
              Contact via email
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Workspace setup for developing light-eventuate-4j component </h1>

			

<h2 id="introduction">Introduction</h2>

<p>Microservices enable businesses to innovate faster and stay ahead of the competitions.
But one major challenge with the microservices architecture is the management of
distributed data. Each microservice has its own private database. It is difficult to
implement business transactions that maintain data consistency across multiple services
as well as queries that retrieve data from multiple services.</p>

<p>The light-eventuate-4j is an event sourcing and CQRS framework provides a simple yet
powerful event-driven programming model that solves the distributed data management
problems inherent in a microservice architecture.</p>

<p>The programming model is based on two well established patterns: Event Sourcing (ES)
and Command Query Responsibility Segregation (CQRS).</p>

<p>light-eventuate-4j consists of a scalable, distributed event store server and client
libraries for frameworks like light-rest-4j, light-graphql-4j and light-hybrid-4.</p>

<p>The following assume you are going to update or add new feature to the light-eventuate-4j
framework and install every component manually so that you have better control in order
to debug into each of them.</p>

<h2 id="prepare-workspace">Prepare Workspace</h2>

<p>All specifications and code of the services are on github.com but we are going to
redo it again by following the steps in the tutorial. Let&rsquo;s first create a workspace.</p>

<p>I have created a directory named networknt under user directory. So my workspace is
~/networknt</p>

<h2 id="checkout-and-build-related-projects">Checkout and build related projects.</h2>

<pre><code>cd ~/networknt
git clone git@github.com:networknt/light-4j.git
git clone git@github.com:networknt/light-rest-4j.git
git clone git@github.com:networknt/light-hybrid-4j.git
git clone git@github.com:networknt/light-codegen.git
git clone git@github.com:networknt/light-eventuate-4j.git
git clone git@github.com:networknt/light-eventuate-example.git

</code></pre>

<p>In fact, only light-eventuate-4j is needed; however, other projects provides source code
so that you can read and understand how services built on top of each frameworks will be
interacting with light-eventuate-4j.</p>

<p>Go into the project folders above one by one, and build the each project with maven</p>

<pre><code>mvn clean install

</code></pre>

<h2 id="install-and-start-kafka-zookeeper-and-mysql-without-docker">Install and start Kafka, Zookeeper and Mysql without Docker</h2>

<p>For most people, you don&rsquo;t need to manually install Kafka, Zookeeper and Mysql on your
computer. It is easy to use docker-compose from <a href="https://github.com/networknt/light-docker">light-docker</a></p>

<p>The following steps are for two types of developers:</p>

<ul>
<li><p>DevOps guy that need to install above software package into official environments
including prod.</p></li>

<li><p>Hardcore developer that don&rsquo;t want to install Docker and want fully control of each
component so that they can debug into them with configuration changes at ease.</p></li>
</ul>

<p>The light-eventuate-4j event sourcing/CQRS framework build on event store which used to save
and dispatch events for subscribing microservices.</p>

<p>The event store is build upon the database Mysql (Postgres and Oracle in the future) and
distributed stream system (Kafka). Zookeeper is require to run Kafka cluster. For the local
environment without Docker, please follow below step to setup the infrastructure components.</p>

<h3 id="install-mysql">Install Mysql</h3>

<p>&ndash; Mysql (by default: we use mysql as database to save event/entity/snapshot records):</p>

<p>&ndash; Download mysql database (version: 5.7.18 and above) and install it in local environment.</p>

<p>&ndash; start mysql database: &gt;mysqld</p>

<p>&ndash; get and run DB setup script from folder: /light-eventuate-4j/eventuate-client/src/main/resources/mysql-event-store-schema.sql</p>

<h3 id="install-kafka">Install Kafka</h3>

<p>&ndash;Download Kafka (distributed steam system) from for version (2.11-0.10.2.0 or above):
  <a href="http://www.us.apache.org/dist/kafka/0.10.2.0/kafka_2.11-0.10.2.0.tgz">http://www.us.apache.org/dist/kafka/0.10.2.0/kafka_2.11-0.10.2.0.tgz</a></p>

<p>&ndash; Start zookeeper server and Kafka server:
   Kafka uses ZooKeeper so you need to first start a ZooKeeper server if you don&rsquo;t already have one. You can use the convenience script packaged with kafka to get a quick-and-dirty single-node ZooKeeper instance.
  &gt; bin/zookeeper-server-start.sh config/zookeeper.properties</p>

<p>&mdash; Start Kafka server
  &gt;bin/kafka-server-start.sh config/server.properties</p>

<h2 id="install-and-start-kafka-zookeeper-and-mysql-with-docker">Install and start Kafka, Zookeeper and Mysql with Docker</h2>

<p>If you want to develop light-eventuate-4j and don&rsquo;t want to install above software package
one by one, you can install and start them in one docker-compose command.</p>

<p>First you need to checkout light-docker which contains all docker related files and run the
command. Make sure you have Docker installed before running docker-compose.</p>

<pre><code class="language-$xslt">git clone git@github.com:networknt/light-docker.git
cd ~/networknt/light-docker
docker-compose -f docker-compose-eventuate.yml up
</code></pre>

<p>The above docker-compose command will start Mysql, Zookeeper and Kafka all together.</p>

<p>When you want to shutdown, you open another terminal and run.</p>

<pre><code class="language-$xslt">cd ~/networknt/light-docker
docker-compose -f docker-compose-eventuate.yml down
</code></pre>

<p>You can kill the docker-compose from the same terminal by issuing CTRL+C but should run
the following command anyway in order to cleanup these docker containers.</p>

<pre><code class="language-$xslt">docker-compose -f docker-compose-eventuate.yml down 
</code></pre>

<h2 id="prepare-and-start-cdc-change-data-capture-restful-server">Prepare and start CDC (Change Data Capture) RESTful server</h2>

<p>CDC services use database binlog to populate data from database (mysql) to distributed
stream system (kafka).</p>

<p>They are two different types of CDC service and one is a standalone Restful server
(cdc-server) and another one is a hybrid service(cdc-service).</p>

<p>The easiest way is to use the RESTful server as there is no extra dependencies.</p>

<p>You can start it manually by following these steps.</p>

<pre><code class="language-$xslt">cd ~/networknt/light-eventuate-4j/cdc-server
java -jar target/cdc-server-1.3.5.jar
</code></pre>

<p>or</p>

<pre><code class="language-$xslt">cd ~/networknt/light-eventuate-4j/cdc-server
java -cp target/cdc-server-1.3.5.jar com.networknt.server.Server
</code></pre>

<p>or</p>

<pre><code class="language-$xslt">cd ~/networknt/light-eventuate-4j/cdc-server
mvn exec:exec
</code></pre>

<p>Another way to start CDC RESTful server is by using docker-compose.</p>

<pre><code class="language-$xslt">cd ~/networknt/light-docker
docker-compose -f docker-compose-cdcserver.yml up
</code></pre>

<p>Normally, you only need to start CDC server manually when you are update CDC
components. Docker is much easier and convenient.</p>

<h2 id="prepare-and-start-cqrs-command-server-with-command-services">Prepare and start CQRS command server with command services</h2>

<p>light-eventuate-4j provides two hybrid servers that can be used to host all services
developed on top of light-hybrid-4j framework that communicate with light-eventuate-4j.</p>

<p>Also, it provides cdc-service which is a replacement for above cdc-server and it can be
hosted with command server along with other command services. In this case, you don&rsquo;t
need to start a separate Java instance.</p>

<p>Normally application built on top of light-eventuate-4j will have at least two microservices:</p>

<ul>
<li><p>command side service</p></li>

<li><p>query side service</p></li>
</ul>

<p>These services can be built on top of light-rest-4j, light-graphql-4j or light-hybrid-4j.</p>

<p>If they are built with light-rest-4j or light-graphql-4j, they can be started as normal
standalone servers.</p>

<p>However, if they are built with light-hybrid-4j, they can be started with hybrid-command
or hybrid-query server platforms.</p>

<p>Here is the way to start command server with command services manually. Assuming all your
services and their dependencies are located at ~/networknt/light-eventuate-4j/docker/command/service</p>

<pre><code class="language-$xslt">cd ~/networknt/light-eventuate-4j/hybrid-command
java -cp ~/networknt/light-eventuate-4j/docker/command/service/*:target/hybrid-command-1.3.5.jar com.networknt.server.Server
</code></pre>

<h2 id="prepare-and-start-cqrs-query-server-with-query-services">Prepare and start CQRS query server with query services</h2>

<p>If all your query side services are built on light-hybrid-4j framework, you can copy
them into ~/networknt/light-eventuate-4j/docker/query/service folder along with all
the dependencies that is not included in hybrid-query server.</p>

<p>To start the query server manually.</p>

<pre><code class="language-$xslt">cd ~/networknt/light-eventuate-4j/hybrid-query
java -cp ~/networknt/light-eventuate-4j/docker/query/service/*:target/hybrid-query-1.3.5.jar com.networknt.server.Server

</code></pre>

<h2 id="start-command-server-and-query-server-together-with-docker">Start command server and query server together with Docker</h2>

<p>You can start both command server and query server along with their services
with docker-compose.</p>

<pre><code class="language-$xslt">cd ~/networknt/light-docker
docker-compose -f docker-compose-hybrid.yml up
</code></pre>

<p>Once you have your dev environment setup, you can follow the <a href="https://networknt.github.io/light-eventuate-4j/tutorial/todo-list/">todo-list</a>
tutorial to get started.</p>


			<aside class="copyright" role="note">
				
				&copy; 2017 Released under the MIT license &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="https://networknt.github.io/light-eventuate-4j/tutorial/service-dev/" title="Workspace setup for developing light-eventuate-4j services">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Workspace setup for developing light-eventuate-4j services
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="https://networknt.github.io/light-eventuate-4j/component/" title="Components">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Components
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'https:\/\/networknt.github.io\/light-eventuate-4j';
      var repo_id  = 'networknt\/light-eventuate-4j';
    
    </script>

    <script src="https://networknt.github.io/light-eventuate-4j/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

